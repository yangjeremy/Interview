<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <style>
    .content{
      position: relative;
    }
    .item{
      position: absolute;
      width: 200px;
      margin-right: 10px;
      margin-top: 10px;
      transition: all 0.8s;
    }
    .h1{
      height: 200px;
      background-color: #691bb8;
    }
    .h2{
      height: 300px;
      background-color: #f4b300;
    }
    .h3{
      height: 400px;
      background-color: #006ac1;
    }
  </style>
</head>
<body>
  <div class="content">
    <div class="item h1">
      1
    </div>
    <div class="item h3">
      2
    </div>
    <div class="item h2">
      3
    </div>
    <div class="item h1">
      4
    </div>
    <div class="item h1">
      5
    </div>
    <div class="item h3">
      6
    </div>
    <div class="item h3">
      7
    </div>
    <div class="item h2">
      8
    </div>
    <div class="item h1">
      9
    </div>
    <div class="item h3">
      10
    </div>
    <div class="item h3">
      11
    </div>
    <div class="item h1">
      12
    </div>
    <div class="item h2">
      13
    </div>
    <div class="item h3">
      14
    </div>
    <div class="item h2">
      15
    </div>
    <div class="item h1">
      16
    </div>
    <div class="item h1">
      17
    </div>
    <div class="item h3">
      18
    </div>
    <div class="item h1">
      19
    </div>
    <div class="item h3">
      20
    </div>
    <div class="item h2">
      21
    </div>
    <div class="item h1">
      22
    </div>
    <div class="item h3">
      23
    </div>
    <div class="item h1">
      24
    </div>
    <div class="item h2">
      25
    </div>
    <div class="item h3">
      26
    </div>
  </div>
  <script src='js/jquery-3.2.0.min.js'></script>
  <script>
  waterfall();

  $(window).on('resize',function(){
      waterfall()
  })
  function waterfall(){
    var itemArr=[];
    var colLength=parseInt($('.content').width()/$('.item').width());
    for(var i=0; i<colLength;i++){
      itemArr[i]=0;    //每一项都是0
    }

    $('.item').each(function(){
      var minValue=Math.min.apply(null,itemArr)
      //获取数组的最小值
      var minIndex=itemArr.indexOf(minValue)
      //获取最小值的序号

    $(this).css({
        top:itemArr[minIndex],
        left:$(this).outerWidth(true)*minIndex
      })  //设置它的CSS位置
      itemArr[minIndex] += $(this).outerHeight(true)
        //得到数组的最小值（高度），进行叠加
    })
  }


  </script>
</body>
</html>
