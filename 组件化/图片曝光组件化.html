<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <style>
    ul,li{
      margin: 0;
      padding: 0;
      list-style: none;
    }
    .container{
      width: 1200px;
      margin: 0 auto;
    }
    .clearfix:after{
      content: '';
      display: block;
      clear: both;
    }
    .container>li{
      float: left;
      margin: 10px 10px;
    }
    .container>li img{
      width: 380px;
      height: 380px;
    }
    p{visibility: hidden;}
  </style>
</head>
<body>
  <ul class="container clearfix">
    <li><a href="javascript:void(0)"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
      data-src="http://cdn.jirengu.com/book.jirengu.com/img/2.jpg" alt=""></a></li>
    <li><a href="javascript:void(0)"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
      data-src="http://cdn.jirengu.com/book.jirengu.com/img/3.jpg" alt=""></a></li>
    <li><a href="javascript:void(0)"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
      data-src="http://cdn.jirengu.com/book.jirengu.com/img/4.jpg" alt=""></a></li>
    <li><a href="javascript:void(0)"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
      data-src="http://cdn.jirengu.com/book.jirengu.com/img/5.jpg" alt=""></a></li>
    <li><a href="javascript:void(0)"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
      data-src="http://cdn.jirengu.com/book.jirengu.com/img/6.jpg" alt=""></a></li>
    <li><a href="javascript:void(0)"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
      data-src="http://cdn.jirengu.com/book.jirengu.com/img/7.jpg" alt=""></a></li>
    <li><a href="javascript:void(0)"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
      data-src="http://cdn.jirengu.com/book.jirengu.com/img/8.jpg" alt=""></a></li>
    <li><a href="javascript:void(0)"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
      data-src="http://cdn.jirengu.com/book.jirengu.com/img/9.jpg" alt=""></a></li>
    <li><a href="javascript:void(0)"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
      data-src="http://cdn.jirengu.com/book.jirengu.com/img/10.jpg" alt=""></a></li>
    <li><a href="javascript:void(0)"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
      data-src="http://cdn.jirengu.com/book.jirengu.com/img/11.jpg" alt=""></a></li>
    <li><a href="javascript:void(0)"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
      data-src="http://cdn.jirengu.com/book.jirengu.com/img/12.jpg" alt=""></a></li>
    <li><a href="javascript:void(0)"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
      data-src="http://cdn.jirengu.com/book.jirengu.com/img/13.jpg" alt=""></a></li>
    <li><a href="javascript:void(0)"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
      data-src="http://cdn.jirengu.com/book.jirengu.com/img/14.jpg" alt=""></a></li>
    <li><a href="javascript:void(0)"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
      data-src="http://cdn.jirengu.com/book.jirengu.com/img/15.jpg" alt=""></a></li>
    <li><a href="javascript:void(0)"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
      data-src="http://cdn.jirengu.com/book.jirengu.com/img/16.jpg" alt=""></a></li>
    <li><a href="javascript:void(0)"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
      data-src="http://cdn.jirengu.com/book.jirengu.com/img/17.jpg" alt=""></a></li>
      <li><a href="javascript:void(0)"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
        data-src="http://cdn.jirengu.com/book.jirengu.com/img/18.jpg" alt=""></a></li>
      <li><a href="javascript:void(0)"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
        data-src="http://cdn.jirengu.com/book.jirengu.com/img/19.jpg" alt=""></a></li>
      <li><a href="javascript:void(0)"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
        data-src="http://cdn.jirengu.com/book.jirengu.com/img/20.jpg" alt=""></a></li>
      <li><a href="javascript:void(0)"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
        data-src="http://cdn.jirengu.com/book.jirengu.com/img/21.jpg" alt=""></a></li>
      <li><a href="javascript:void(0)"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
        data-src="http://cdn.jirengu.com/book.jirengu.com/img/22.jpg" alt=""></a></li>
        <li><a href="javascript:void(0)"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
          data-src="http://cdn.jirengu.com/book.jirengu.com/img/23.jpg" alt=""></a></li>
        <li><a href="javascript:void(0)"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
          data-src="http://cdn.jirengu.com/book.jirengu.com/img/24.jpg" alt=""></a></li>
        <li><a href="javascript:void(0)"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
          data-src="http://cdn.jirengu.com/book.jirengu.com/img/25.jpg" alt=""></a></li>
          <p id='hello'>hello</p>
          <p id="world">world</p>
  </ul>
<script src="js/jquery-3.2.0.min.js"></script>
<script>
var Lazy=(function(){
  function Exposure($target, callback){
    this.$target = $target;
    this.callback = callback;
    this.bind();
    this.check();
  }
  Exposure.prototype.bind = function(){
    var _this = this;
    $(window).on('scroll', function(){
      _this.check();
    })
  }
  Exposure.prototype.check=function(){
         if(this.isShow(this.$target)){
           this.callback(this.$target);
         }
  }
  Exposure.prototype.isShow=function(){
    var windowHeight=$(window).height(),
        scrollTop=$(window).scrollTop(),
        offsetTop=this.$target.offset().top,
        nodeHeight=this.$target.height()
    if(windowHeight+scrollTop>offsetTop&&
      scrollTop<offsetTop+nodeHeight){
        return true;
    }else{
        return false;
    }

  }

  return {
    init:function($targets,callback){
      $targets.each(function(idx,target){
        new Exposure($(target),callback)
      })
    }
  }
})()







/*
$('.container img').each(function(idx,img){
  new Exposure($(img),function($img){
    showImg($img)     //定义callback，曝光组件运行
  })
})
*/


Lazy.init($('.container img'),function(a){
  showImg(a)
});
function showImg($img){
   var imgUrl = $img.attr('data-src');
   $img.attr('src', imgUrl);
}
</script>
</body>
</html>
